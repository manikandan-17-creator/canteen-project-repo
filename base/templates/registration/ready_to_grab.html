<!DOCTYPE html>
<html lang="en">
<head>
    {% load static %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LICET Cafeteria: Ready-To-Grab</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'accounts/ready_to_grab.css' %}">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
</head>
<body>
    <!-- Hamburger Menu -->
    <div class="hamburger-menu" onclick="toggleSidebar()">
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
    </div>

    <!-- Navigation of Side Bar-->
    <nav class="sidebar" id="sidebar">
    <a href="{% url 'home' %}">Home</a>
    <a href="{% url 'cart_summary' %}">Cart</a>
    <a href="{% url 'contact' %}">Contact</a> <!-- or use mailto or a contact section -->
    </nav>

    <!-- User Button -->
        <div class="user-button">
    <img id="profilePic" src="Images/Ready-To-Grab/User-Logo.png" alt="User Profile">
    <span class="user-info" id="profileName">User Name</span>
    </div>


    <!-- Sidebar Navigation -->
    <nav class="sidebar" id="sidebar">
        <a href="#">Home</a>
        <a href="#">Menu</a>
        <a href="#">Cart</a>
        <a href="#">Contact</a>
    </nav>

    <!-- Header Section -->
    <div class="header-logo">
        <img src="Images/Ready-To-Grab/licet_logo.png" alt="LICET Cafeteria Logo">
        <h1>LICET Cafeteria</h1>
    </div>
    
    <!-- Added Beverage Menu Heading -->
    <h1 class="menu-heading">Ready to Grab</h1>
    <p class="menu-heading">Quick bites, no waits your meal is ready!</p>

    <div class="container">
        <!-- Lunch Veg -->
        <section class="category-section hot-beverages">
            
            <div class="category-header">
                <h2>Lunch Veg</h2>
            </div>
              {% for product in products %}
                {% if product.sub_category == 'VEG LUNCH' %}
                <div class="beverage-card">
                    <img src="{{product.image.url}}" class="beverage-image" alt="Masala Chai">
                    <h3>{{ product.name }}</h3>
                    <div class="price-tag">â‚¹{{ product.price}}</div>
                    <button  class="add-cart order-btn" data-product="{{ product.id }}">Add to Cart</button>
                </div>
                {% endif %}
              {% endfor %}
            </div>
        </section>
    <div class="container">
        <!-- Non-Veg -->
        <section class="category-section cold-beverages">
            <div class="category-header">
                <h2>Non-Veg</h2>
            </div>
              {% for product in products %}
                {% if product.sub_category == 'NON VEG' %}
                <div class="beverage-card">
                    <img src="{{product.image.url}}" class="beverage-image" alt="Masala Chai">
                    <h3>{{ product.name }}</h3>
                    <div class="price-tag">â‚¹{{ product.price}}</div>
                    <button class="add-cart order-btn">Add to Cart</button>
                </div>
                {% endif %}
              {% endfor %}
            </div>
        </section>
        
        <a href="{% url 'cart_summary' %}" class="cart-button">ðŸ›’ Cart (<span id="cart_quantity">{{ cart|length }}</span>)</a>

    </div>

    <!-- Footer -->
  <footer class="footer">
    <p>&copy; 2025 LICET Cafeteria. All rights reserved.</p>
    <div class="social-links">
      <a href="#" aria-label="Facebook"><img src="Images/Landing Page/facebook.jpg" alt="Facebook"></a>
      <a href="#" aria-label="Instagram"><img src="Images/Landing Page/instagram.jpg" alt="Instagram"></a>
      <a href="#" aria-label="Twitter"><img src="Images/Landing Page/X.png" alt="Twitter"></a>
    </div>
  </footer>

  
<script>
$(document).on('click', '.add-cart', function(e) {
    e.preventDefault();
    const productId = $(this).data('product');  // get product ID from data attribute

    $.ajax({
        type: 'POST',
        url : '{% url "cart_add" %}',

        data: {
            product_id: productId,
            csrfmiddlewaretoken: '{{ csrf_token }}',
            action: 'post'
        },
        success: function(json) {
            document.getElementById('cart_quantity').textContent = json.quantity; // Update cart quantity
            
            console.log('Item added to cart:', json);
        },
        error: function(xhr, errormsg, error) {
            console.error('Error adding item to cart:', error);
        }
    });
});
</script>
