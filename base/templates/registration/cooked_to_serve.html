
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LICET Cafeteria: Cooked-To-Serve</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    {% load static %}
    <link rel="stylesheet" href="{%static 'accounts/cooked_to_serve.css'%}">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
</head>
<body>
    <!-- Hamburger Menu -->
    <div class="hamburger-menu" onclick="toggleSidebar()">
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
    </div>
    
    <nav class="sidebar" id="sidebar">
    <a href="{% url 'home' %}">Home</a>
    <a href="{% url 'cart_summary' %}">Cart</a>
    <a href="{% url 'contact' %}">Contact</a> <!-- or use mailto or a contact section -->
    </nav>

    <!-- User Button -->
    <div class="user-button">
    <img id="profilePic" src="Images/Ready-To-Grab/User-Logo.png" alt="User Profile">
    <span class="user-info" id="profileName">User Name</span>
    </div>


    <!-- Sidebar Navigation -->
    <nav class="sidebar" id="sidebar">
        <a href="#">Home</a>
        <a href="#">Menu</a>
        <a href="#">Cart</a>
        <a href="#">Contact</a>
    </nav>

    <!-- Header Section -->
    <div class="header-logo">
        <img src="Images/Ready-To-Grab/licet_logo.png" alt="LICET Cafeteria Logo">
        <h1>LICET Cafeteria</h1>
    </div>
    
    <!-- Added Beverage Menu Heading -->
    <h1 class="menu-heading">Cooked to Serve</h1>
    <p class="menu-heading">Freshly made, just the way you crave!</p>

    <div class="container">
        <!-- Veg Fried Rice & Noodles -->
        <section class="category-section hot-beverages">
            <div class="category-header">
                <h2>Veg Lunch</h2>
            </div>
            {% for product in products %}
                {% if product.sub_category == 'VEG LUNCH' %}
                <div class="beverage-card">
                    <img src="{{product.image.url}}" class="beverage-image" alt="Masala Chai">
                    <h3>{{ product.name }}</h3>
                    <div class="price-tag">â‚¹{{ product.price}}</div>
                    <button class="order-btn">Add to Cart</button>
                </div>
                {% endif %}
            {% endfor %}
            </div>
        </section>
    <div class="container">
        <!-- Non-Veg -->
        <section class="category-section cold-beverages">
            <div class="category-header">
                <h2>Non-Veg Lunch</h2>
            </div>
            {% for product in products %}
                {% if product.sub_category == 'NON VEG' %}
                <div class="beverage-card">
                    <img src="{{product.image.url}}" class="beverage-image" alt="Masala Chai">
                    <h3>{{ product.name }}</h3>
                    <div class="price-tag">â‚¹{{ product.price}}</div>
                    <button class="order-btn">Add to Cart</button>
                </div>
                {% endif %}
            {% endfor %}
            </div>
        </section>

        
    <div class="container">
        <!--Veg -->
        <section class="category-section hot-beverages">
            <div class="category-header">
                <h2>Veg Noodles</h2>
            </div>
            {% for product in products %}
                {% if product.sub_category == 'VEG NOODLES' %}
                <div class="beverage-card">
                    <img src="{{product.image.url}}" class="beverage-image" alt="Masala Chai">
                    <h3>{{ product.name }}</h3>
                    <div class="price-tag">â‚¹{{ product.price}}</div>
                    <button class="order-btn">Add to Cart</button>
                </div>
                {% endif %}
            {% endfor %}   
            </div>
        </section>

       
        <button class="cart-button" onclick="window.location.href='6.Cart.html'">ðŸ›’ Cart (<span id="cart-count">0</span>)</button>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <p>&copy; 2025 LICET Cafeteria. All rights reserved.</p>
        <div class="social-links">
        <a href="#" aria-label="Facebook"><img src="Images/Landing Page/facebook.jpg" alt="Facebook"></a>
        <a href="#" aria-label="Instagram"><img src="Images/Landing Page/instagram.jpg" alt="Instagram"></a>
        <a href="#" aria-label="Twitter"><img src="Images/Landing Page/X.png" alt="Twitter"></a>
        </div>
    </footer>

    <script>
  function toggleSidebar() {
    document.getElementById('sidebar').classList.toggle('active');
  }

  document.addEventListener('click', function(event) {
    const sidebar = document.getElementById('sidebar');
    const hamburger = document.querySelector('.hamburger-menu');
    if (!sidebar.contains(event.target) && !hamburger.contains(event.target)) {
      sidebar.classList.remove('active');
    }
  });

  // ---------------- CART SYSTEM ----------------

  const cartElement = document.getElementById('cart-count');

  function updateCartCount() {
    const cart = JSON.parse(localStorage.getItem('cartItems')) || [];
    const total = cart.reduce((sum, item) => sum + item.qty, 0);
    cartElement.textContent = total;
  }

  function addToCart(item) {
    let cart = JSON.parse(localStorage.getItem('cartItems')) || [];

    const existingIndex = cart.findIndex(i => i.name === item.name);
    if (existingIndex !== -1) {
      cart[existingIndex].qty += 1;
    } else {
      cart.push({ ...item, qty: 1 });
    }

    localStorage.setItem('cartItems', JSON.stringify(cart));
    updateCartCount();
  }

  // Attach to all buttons
  document.querySelectorAll('.order-btn').forEach(button => {
    button.addEventListener('click', () => {
      const card = button.closest('.beverage-card');
      const name = card.querySelector('h3').textContent;
      const price = parseInt(card.querySelector('.price-tag').textContent.replace('â‚¹', ''));
      const img = card.querySelector('img').src;

      addToCart({ name, price, img });
    });
  });

  document.addEventListener('DOMContentLoaded', () => {
    updateCartCount();

    const data = JSON.parse(localStorage.getItem('userData')) || {};
    if (data.fullName) {
      document.getElementById('profileName').textContent = data.fullName;
    }
    if (data.profilePic) {
      document.getElementById('profilePic').src = data.profilePic;
    }
  });
</script>

</body>
</html>
